# 1.4 제어의 역전(IoC) (p.92 ~ 93)

## 1.4.3 제어권의 이전을 통한 제어관계 역전

<br />

> 제어의 역전은 간단히 프로그램의 제어 흐름 구조가 뒤바뀐 것을 의미한다.

<br />

1. 일반적인 프로그램의 흐름
    
    1. main()메소드와 같이 프로그램이 시작되는 지점에서 사용할 오브젝트 결정

    2. 결정한 오브젝트를 생성하고, 만들어진 오브젝트에 있는 메소드 호출

    3. 해당 오브젝트 메소드 안에서 사용할 것을 결정하고 호출하는 식의 작업 반복

- 일반적인 프로그램의 흐름 구조에서 각 오브젝트는 프로그램 흐름을 결정하거나 사용할 오브젝트를 구성하는 작업에 능동적으로 참여한다.

- 모든 오브젝트가 능동적으로 자신이 사용할 클래스를 결정하고, 언제 어떻게 그 오브젝트를 만들지를 스스로 관장한다. 모든 종류의 작업을 사용하는 쪽에서 제어하는 구조다.

<br />

- 제어의 역전

    - 오브젝트가 자신이 사용할 오브젝트를 스스로 선택과 생성을 하지 않는다. 자신이 어떻게 만들어지고 어디서 사용되는지를 알 수 없다.
    
    - 모든 제어 권한을 자신이 아닌 다른 대상에게 위임하기 때문이다.

    - 프로그램의 시작을 담당하는 main과 같은 엔트리 포인트를 제외하면 모든 오브젝트는 이렇게 위임받은 제어 권한을 갖는 특별한 오브젝트에 의해 결정되고 만들어진다.

<br />

```
* 제어의 역전 개념이 적용된 예

초난감 DAO 개선 작업의 초기에 적용햇던 템플릿 메소드 패턴에 추상 UserDao를 상속한 서브클래스는 getConnection()을 구현한다. 하지만 이 메소드가 언제 어떻게 사용될지 자신은 모른다. 서브클래스에서 결정되는 것이 아니고 단지 이런 방식으로 DB 커넥션을 만든다는 기능만 구현해놓으면, 슈퍼클래스인 UserDao의 템플릿 메소드인 add(), get() 등에서 필요할 때 호출해서 사용하는 것이다. 즉 제어권을 상위 템플릿 메소드에 넘기고 자신은 필요할 때 호출되어 사용되도록 한다는, 제어의 역전 개념을 발견할 수 있다. 

템플릿 메소드는 제어의 역전이라는 개념을 활용해 문제를 해결하는 디자인 패턴이라고 볼 수 있다.
```

- 프레임워크는 라이브러리의 다른 이름이 아니다.

