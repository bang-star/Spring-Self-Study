# 1.5 스프링의 IoC

## 1.5.2 애플리케이션 컨텍스트의 동작방식(p. 99 ~ 100)

### 1. 오브젝트 팩토리 방식과 스프링의 애플리케이션 컨텍스트 방식 비교

- 오브젝트 팩토리에 대응되는 것이 스프링의 애플리케이션 컨텍스트이다.
- 스프링에서 애플리케이션 컨텍스트를 IoC 컨테이너, 스프링 컨테이너 또는 빈 팩토리라고 한다.

```
1. 애플리케이션 컨텍스트는 ApplicationContext 인터페이스를 구현 
2. ApplicationContext는 빈 팩토리가 구현하는 BeanFactory 인터페이스를 상속

애플리케이션 컨텍스트 <-(구현)- ApplicationContext <-(상속)- BeanFactory

즉, 애플리케이션 컨텍스트는 일종의 빈 팩토리인 셈이다.
```

- DaoFactory는 UserDao를 비롯한 DAO 오브젝트를 생성하고 DB 생성 오브젝트와 관계를 맺어주는 제한적인 역할

- 애플리케이션 컨텍스트는 애플리케이션에서 IoC를 적용해서 관리할 모든 오브젝트에 대한 생성과 관계설정 역할

- ApplicationContext에는 DaoFactory와 달리 직접 오브젝트를 생성하고 관계를 맺어주는 코드가 없고, 그런 생성정보와 연관관계 정보를 별도의 설정정보를 통해 얻는다. 외부의 오브젝트 팩토리에 그 작업을 위임하고 그 결과를 가져다가 사용하기도 한다.

- @Configuration이 붙은 DaoFactory는 애플리케이션 컨텍스트가 활용하는 IoC 설정정보이다.
- 내부적으로는 애플리케이션 컨텍스트가 DaoFactory의 userDao() 메소드를 호출해서 오브젝트를 가져온 것을 클라이언트가 getBean()으로 요청할 때 전달해준다.

<img src="https://user-images.githubusercontent.com/40616436/76144511-a79a8680-60c4-11ea-8fb7-ff645d26d2d9.png">

- 애플리케이션 컨텍스트를 사용하는 이유는 범용적이고 유연한 방법으로 IoC 기능을 확장하기 위해서이다.

<br />
<hr />
<br />

### 2. 애플리케이션 컨텍스트의 장점

- 클라이언트는 구체적인 팩토리를 알 필요가 없다.

    - 애플리케이션이 발전하면 DaoFactory처럼 IoC를 적용한 오브젝트도 계속 추가될 것이다. 클라이언트가 필요한 오브젝트를 가져오려면 어떤 팩토리 클래스를 사용해야할지 알아야하고, 필요할 때마다 팩토리 오브젝트를 생성해야 하는 번거로움이 있다.

    - 애플리케이션 컨텍스트를 이용하면 일관된 방식으로 원하는 오브젝트를 가져올 수 있고, DaoFacotory처럼 자바 코드를 작성하는 대신 XML처럼 단순한 방법을 사용해 애플리케이션 컨텍스트가 사용할 IoC 설정정보를 만들 수 있다.

<br />
    
- 애플리케이션 컨텍스트는 종합 IoC 서비스 제공

    - 애플리케이션 컨텍스트의 역할은 단지 오브젝트 생성과 다른 오브젝트와의 관계설정만이 전부가 아니다. 오브젝트으가 만들어지는 방식, 시점과 전략을 다르게 가져갈 수 있고, 이에 부가적으로 자동생성, 오브젝트에 대한 후처리, 정보의 조합, 설정 방식의 다변화, 인터셉팅 등 오브젝트를 효과적으로 활용할 수 있는 다양한 기능을 제공한다.

    - 빈이 사용할 수 있는 기반기술 서비스나 외부 시스템과의 연동 등을 컨테이너 차원에서 제공해주기도 한다.

<br />

- 애플리케이션 컨텍스트는 빈을 검색하는 다양한 방법을 제공한다.

    - 애플리케이션 컨텍스트의 getBean() 메소드는 빈의 이름을 이용해 빈을 찾아준다.

    - 타입만으로 빈을 검색하거나 특별한 애토네이션 설정이 되어 있는 빈을 찾을 수 있다.

<br />
<hr />
<br />

## 1.5.3 스프링 IoC 용어 정리

- 빈(Bean)
  
  - 빈 또는 오브젝트는 스프링이 IoC 방식으로 관리하는 오브젝트를 의미한다.

  - 주의할점은 스프링을 사용하는 애플리케이션에서 만들어지는 모든 오브젝트 중 스프링이 직접 생성과 제어를 담당하는 오브젝트만 빈이다.

- 빈 팩토리(Bean Factory)

  - 스프링의 IoC를 담당하는 핵심 컨테이너를 의미한다.
  
  - 빈을 등록하고, 생성하고, 조회하고 돌려주고, 그 외에 부가적인 빈을 관리하는 기능을 담당한다.

  - 보통 빈 팩토리를 바로 사용하지 않고 이를 확장한 애플리케이션 컨텍스트를 이용한다.

  - BeanFactory라고 붙여쓰면 빈 팩토리가 구현하고 있는 가장 기본적인 인터페이스의 이름이 된다.

  - 인터페이스에 getBean()과 같은 메소드가 정의되어 있다. 

- 애플리케이션 컨텍스트(Application Context)

  - 빈 팩토리를 확장한 IoC 컨텍스트를 의미한다.

  - 빈을 등록하고 관리하는 기본적인 기능은 빈 팩토리와 동일하다.

  - 스프링이 제공하는 각종 부가 서비스를 추가로 제공한다.

  - 빈 팩토리를 부를 때는 주로 빈의 생성과 제어의 관점에서 이야기하는 것이고, 애플리케이션 컨텍스트라 할때는 스프링이 제공하는 애플리케이션 지원 기능을 모두 포함해서 이야기하는 것이라고 보면 된다.

  - 스프링에서는 애플리케이션 컨텍스트라는 용어를 빈 팩토리보다 더 많이 사용한다.

  - ApplicationContext라고 적으면 애플리케이션 컨텍스트가 구현해야 하는 기본 인터페이스를 가리키는 것이기도 하다.

- 설정정보/설정 메타정보(Configuration metadata)

  - 스프링의 설정정보는 애플리케이션 컨텍스트 또는 빈 팩토리가 IoC를 적용하기 위해 사용하는 메타정보를 의미한다.

  - 스프링의 설정정보는 컨테이너에 어떤 기능을 조정하는 경우에도 사용하지만, 그보다는 IoC에 의해 관리되는 애플리케이션 오브젝트를 생성하고 구성할 때 사용되기 때문에 애플리케이션의 형상 정보라고도 한다.

- 컨테이너 또는 IoC 컨테이너

  - IoC 방식으로 빈을 관리한다는 의미에서 애플리케이션 컨텍스트나 빈 팩토리를 컨테이너 또는 IoC 컨테이너라고도 한다.

  - IoC컨테이너는 주로 빈 팩토리 관점에서 이야기하는 것이고, 컨테이너 또는 스프링 컨테이너라고 할 때는 애플리케이션 컨텍스트를 가리키는 것이다.

  - 컨테이너라는 말 자체가 Ioc의 개념을 담고 있기 때문에 이름이 긴 애플리케이션 컨텍스트 대신에 스프링 컨테이너라고 부르는 걸 선호하는 사람들도 있다.

  - 애플리케이션 컨테스트는 그 자체로 ApplicationContext 인터페이스를 구현한 오브젝트를 가리키기도 하는데, 애플리케이션 컨텍스트 오브젝트는 하나의 애플리케이션에서 보통 여러 개가 만들어져 사용된다. 이를 통틀어 스프링 컨테이너라고 부를 수 있다.


- 스프링 프레임워크

  - 스프링 프레임워크는 IoC 컨테이너, 애플리케이션 컨텍스트를 포함해서 스프링이 제공하는 모든 기능을 통틀어 말할 때 주로 사용한다.

  